<!DOCTYPE html>
<html>
  <head>
    <title>Huvis Graph Visualization</title>
    <link href="/css/huvis.css" rel="stylesheet" type="text/css">
    <link href="/css/huvis_controls.css" rel="stylesheet" type="text/css">
    <link href="/css/lariat.css" rel="stylesheet" type="text/css">
    <link href="/css/CRRT.css" rel="stylesheet" type="text/css">
    <link href="/css/gclui.css" rel="stylesheet" type="text/css">
    <link href="/css/help.css" rel="stylesheet" type="text/css">
    <link href="/css/jquery-ui.css" rel="stylesheet"/>
    <style>
      #predicates {
        overflow-y: scroll;
        max-height: 20em;
      }
    </style>
  <% if @is_local: %>
    <XXlink href="/css/debugging.css" rel="stylesheet"/>
  <% end %>
    <script>
      window.module = {};
    </script>
    <script src="/node_modules/async/lib/async.js"></script>
    <script src="/vendor/green_turtle.js"></script>
  <% if @is_local: %>
    <script src="/vendor/jquery.js"></script>
    <script src="/vendor/d3.v3.min.js"></script>
    <script src="/vendor/jquery-ui.min.js"></script>
  <% else: %>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//d3js.org/d3.v3.js" charset="utf-8"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
  <% end %>
  </head>
  <body>
    <div id="snippet_box">
    </div>
  <section role="controls" id="tabs">
    <ul style="font-size:80%">
       <li><a href="#tabs-help" title="Introduction and Usage">Help</a></li>
       <li><a href="#tabs-options" title="Fine tune sizes, lengths and thicknesses.">Settings</a></li>
       <li><a href="#huvis_controls" title="Power tools for controlling the graph with commands consisting of verbs and nouns.">Commands</a></li>
       <li><a href="#tabs-history" title="The history of commands">History</a></li>
       <li><a href="#tabs-hide" title="Shrink this menu for maximum room to play.">Hide</a></li>
    </ul>
    <div id="tabs-help" class="scrolling_tab">
      <h1 class="git-branch-is-<%= @git_branch_name %>">
        HuViz
        <% if @git_commit_hash: %>
          <sup class="git_commit_hash">
            <a target="huviz_version" href="https://github.com/smurp/huviz/commit/<%= @git_commit_hash %>"><%= @git_commit_hash %></a>
          </sup>
        <% end %>
      </h1>
      <h2>Orlando RDF Explorer</h2>
      <h6>(currently works best in Google Chrome)</h6>
      <div class="huviz-versions">
        <a href="http://orlando.dev.semandra.com"
           class="git-branch-is-master <% if @git_branch_name is 'master':%>current-git-branch<% end %>">production</a>
        <a href="http://beta.orlando.dev.semandra.com"
           class="git-branch-is-beta  <% if @git_branch_name is 'beta':%>current-git-branch<% end %>">beta</a>
        <a href="http://alpha.orlando.dev.semandra.com"
           class="git-branch-is-alpha  <% if @git_branch_name is 'alpha':%>current-git-branch<% end %>">alpha</a>
        <a href="/tests">tests</a>
        <a href="/orlonto.html">ontology</a>
      </div>
      <p>This interface is intended to help you explore the
        information and relationships encoded in
        the <a href="http://www.artsrn.ualberta.ca/orlando/" target="_blank">Orlando</a>
        text database of British Women Writers.
        In particular, HuViz helps explore semantic information expressed in
        <a hef="http://www.artsrn.ualberta.ca/orlando/">RDF triples</a>
        that assert things like
        <span class='eg-subject'>Writer</span> <span class='eg-verb'>hasSex</span> <span class='eg-object'>FEMALE</span>
        or <span class='eg-subject'>Writer</span> <span class='eg-verb'>livedInPlace</span> <span class='eg-object'>London</span>.
        HuViz is also able to display the <a href="/orlonto.html">Orlando Ontology</a>,
        the formal definition of the things and relationships depicted here.
      </p>
      <h3>Quick Start</h3>
      <ul>
        <li>Go to <a class="open_tab" href="#2">Commands</a> and pick a <i>data set</i>.</li>
        <li>Click the verb <i>choose</i>,
            notice the command you've built -- <code>choose Thing.</code> --
            then press <button disabled>Do it</button>.</li>
        <li>Go to <a class="open_tab" href="#1">Settings</a> to adjust the sizes of things</li>
        <li>Hover over nodes and edges to see their labels</li>
        <li>Click edges to see the snippets of text which inspired them.</li>
        <li>Drag nodes to and from the green shelf, the central graph and the red discard pile</li>
        <li>Chosen nodes are marked with a black perimeter. They are the nodes that you've expressed interest in by 'choosing' them to be in the graph. 'Unchosen' nodes are in the graph because they've been drawn in by chosen nodes.</li>
        <li>The verb 'choose' causes all the nodes linked to the chosen node to be drawn into the graph (except the discarded ones)</li>
        <li>The verb 'unchoose' causes the shelving of all the unchosen
            nodes which have an edge shown to the chosen node.</li>
      </ul>
    </div>
    <div id="tabs-history" class="scrolling_tab">
    </div>
    <div id="tabs-options" class="graph_controls">
    </div>
    <div id="huvis_controls">
      <div class="unselectable">
        <label title="which file to load">
          data set
          <select
              name="data_set" class="file_picker"
              onchange="HVZ.load_file(this)"
              title="data sets are in order of increasing complexity">
	    <option value=""> -- pick -- </option>
	    <option value=""> -- Individuals -- </option>
            <option title="Augusta Ada Byron -- all attributes -- TBD">/data/byroau.nq</option>
            <option title="Maria Abdy -- all attributes -- 68 nodes; 308 edges; 37 predicates">/data/abdyma.nq</option>
            <option title="R.M. Ballantyne -- all attributes -- 14 nodes; 60 edges; 17 predicates">/data/ballrm.nq</option>
            <option title="William Shakespeare -- basic relational predicates -- 41 nodes; 46 edges; 21 predicates ">/data/shakwi.nq</option>
 	    <option value=""> -- Organizations -- </option>
            <option title="AcadÃ©mie des Femmes -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/academie_des_femmes.nq</option>
            <option title="African National Contgres -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/african_national_congress.nq</option>
            <option title="The Bronte Sisters -- all attributes -- 423 node; 666 edges; 43 predicates">/data/brontes.nq</option>
            <option title="Early Writers:  573 nodes; edges 835; predicates 52">/data/early_writers.nq</option>
	    <option title="Female Anti-Slavery Society -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/female_antislavery_society.nq</option>
            <option title="Newnham College -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/newnham_college.nq</option>
	    <option title="Nuns: Middle Ages -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/nuns.nq</option>
	    <option title="The 1917 Club -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/the_1917_club.nq</option>
	    <option title="The 17th Century Quakers -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/the_17th_century_quakers.nq</option>
 	    <option value=""> -- Periodicals -- </option>
            <option title="The Yellow Book AND Poet -- all attributes -- ?? nodes; ?? edges; ?? predicates">/data/yellow_book_and_poet.nq</option>
	    

	    <!--
            <option title="Margaret Atwood -- all attributes -- 444 nodes; 2325 edges; 41 predicates">/data/atwoma.nq</option>
            <option title="The Poetesses -- all attributes -- 1735 nodes; 1646 edges; 11 predicates">/data/poetesses.nq</option>
            <option title="Relations -- all writers -- basic relational predicates -- DANGER! -- 6897 nodes; edges 11761; predicates 10">/data/relations.nq</option>
	    -->


	    <!--
            <option>/data/test_1.nq</option>
            <option>/data/test_40.nq</option>


            <option>/data/test_100.nq</option>
            <option>/data/test_40.ttl</option>
            <option>/data/test_1.ttl</option>
            <option>/data/test_20.ttl</option>
            <option>/data/all.ttl</option>
            <option>/data/all.nq</option>
            <option>/data/test_20.nq</option>
            <option>/data/orlando_ontology.ttl</option>
	    -->
          </select>
        </label>
        <span>
          <button id="reset_btn" style="display:none" type="button" onclick="HVZ.reset_data(this)">
            reset
          </button>
        </span>
      </div>

      <div id="gclui"></div>
    </div>
  </section>
    <div id="vis" class="underneath" style="z-index:-3"></div>
    <div id="viscanvas" class="underneath"></div>
    <pre id="status"></pre>
    <div id="state_msg_box"></div>

    <script src="/huviz/huviz.js?23234"></script>
    <script>
      var HVZ;
      document.addEventListener('touchmove', function(e) {
        e.preventDefault();
      }, false);
      document.addEventListener('dataset-loaded', function(e) {
        //HVZ.choose_everything();
      }, false);

      window.addEventListener('load',function(){
        huviz = require('huviz');
        HVZ = new huviz.Orlando();
        //HVZ.set_ontology("/data/orlando_ontology.ttl");
        //HVZ.set_ontology("/data/OrlandoOntology-SexesUnderPerson.ttl");
        //HVZ.set_ontology("/data/OrlandoOntology.ttl");
        HVZ.set_ontology("/data/OrlandoOntologyPull5.ttl"); 
        HVZ.boot_sequence();
      });
    </script>
  </body>
</html>

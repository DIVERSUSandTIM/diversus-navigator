<!DOCTYPE html>
<html>
  <head>
    <title>Huvis Graph Visualization</title>
    <link href="/css/huvis.css" rel="stylesheet" type="text/css">
    <link href="/css/huvis_controls.css" rel="stylesheet" type="text/css">
    <link href="/css/lariat.css" rel="stylesheet" type="text/css">
    <link href="/css/CRRT.css" rel="stylesheet" type="text/css">
    <link href="/css/gclui.css" rel="stylesheet" type="text/css">
  </head>
  <body>
      <div id="file_picker_box">
        <select id="file_picker" onchange="HVZ.load_file()" >
          <option>data/test_40.ttl</option>
          <option>data/test_1.ttl</option>
          <option>data/test_20.ttl</option>
          <option>data/test_1.nq</option>
          <option>data/all.ttl</option>
        </select>
      </div>
    <div id="huvis_controls">
      <div id="gclui"></div>


    </div>
    <div id="vis" class="underneath" style="z-index:-3"></div>
    <div id="viscanvas" class="underneath"></div>
    <div id="status" onclick="clear_box()"></div>
    <div id="nodectrl"></div>
    <div id="edgectrl" class="CRRT"></div>
    <!--
      <script src="http://d3js.org/d3.v3.js" charset="utf-8"></script>
     -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>window.exports = {};</script>
    <script src="application.js?1234"></script>
    <script>
      var gcl = require('graphcommandlanguage');
      var testsuite = function(HVZ){
        ts = new gcl.GCLTestSuite(
            HVZ.gclc,[
             // initially no links are displayed
             {desc: "initial empty graph",
              expectations: [ 
                 ["this.graph_ctrl.nodes.length",7],
                 ["this.graph_ctrl.links_set.length",0]
                ]
              },
             {desc: "choosing writer",
              script: "choose 'w:abdyma'",
              expectations: [
                 ["this.graph_ctrl.nodes.length",7],
                 ["this.graph_ctrl.unlinked_set.length",0],
                 ["this.graph_ctrl.links_set.length",6],
                ]
              },
             {desc: "discarding writer should empty graph",
              script: "discard 'w:abdyma'",
              expectations: [
                 ["this.graph_ctrl.nodes.length",7],
                 ["this.graph_ctrl.unlinked_set.length",6],
                 ["this.graph_ctrl.discarded_set.length",1],
                 ["this.graph_ctrl.links_set.length",0],
                ]
              },
             {desc: "choose AnglicanChurch; expect no effect",
              script:"choose '_:E'",
              expectations: [
                 ["this.graph_ctrl.discarded_set.length",1],
                 ["this.graph_ctrl.discarded_set[0].links_shown.length",0]
                ]
             },
             {desc: "choose from discards should graph",
              script:"choose 'w:abdyma'",
              expectations: [
                 ["this.graph_ctrl.discarded_set.length",0],
                 ["this.graph_ctrl.graphed_set.length",7],
                 ["this.graph_ctrl.unlinked_set.length",0]
                ]
             },
             {desc: "discard AnglicanChurch; expect it to be",
              script:"discard '_:E'",
              expectations: [
                 ["this.graph_ctrl.discarded_set.length",1],
                 ["this.graph_ctrl.discarded_set[0].links_shown.length",0]
                ]
             },
             {desc: "choose AnglicanChurch; expect it to be graphed",
              script:"choose '_:E'",
              expectations: [
                 ["this.graph_ctrl.discarded_set.length",0],
                 ["this.graph_ctrl.nodes.get({'id':'_:E'}).links_shown.length",1]
                ]
             }
            ]
          )
        //ts.verbose = true;
        ts.run();
      };
      if (location.hash.match(/testsuite/)){
        window.addEventListener('showgraph',testsuite);
      }
      //window.addEventListener('showgraph',function(){   });

      var HVZ;
      window.addEventListener('load',function(){
        huviz = require('huviz');
        HVZ = new huviz.Huviz();
        HVZ.load_file();
      });

    </script>
  </body>
</html>
